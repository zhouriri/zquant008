# ZQuanté‡åŒ–åˆ†æå¹³å°

<div align="center">

[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://opensource.org/licenses/Apache-2.0)
[![Python](https://img.shields.io/badge/Python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104+-green.svg)](https://fastapi.tiangolo.com/)
[![Version](https://img.shields.io/badge/version-0.4.0-green.svg)](https://github.com/yoyoung/zquant)

ZQuanté‡åŒ–åˆ†æå¹³å°æ˜¯ä¸€ä¸ªåŸºäºFastAPIçš„å…¨èƒ½é‡é‡åˆ†æç³»ç»Ÿï¼Œæ”¯æŒè‚¡ç¥¨å’ŒåŠ å¯†è´§å¸ï¼Œæä¾›æ•°æ®æœåŠ¡ã€å›æµ‹å¼•æ“ã€ç­–ç•¥ç®¡ç†ç­‰åŠŸèƒ½ã€‚

[åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹) â€¢ [åŠ å¯†è´§å¸](#åŠ å¯†è´§å¸æ¨¡å—) â€¢ [æ–‡æ¡£](#æ–‡æ¡£) â€¢ [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜) â€¢ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md) â€¢ [è®¸å¯è¯](LICENSE)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

ZQuanté‡åŒ–åˆ†æå¹³å°æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„å…¨èƒ½é‡é‡åˆ†æç³»ç»Ÿï¼Œæ”¯æŒ**è‚¡ç¥¨**å’Œ**åŠ å¯†è´§å¸**ä¸¤å¤§é¢†åŸŸï¼Œæ—¨åœ¨ä¸ºé‡åŒ–åˆ†æè€…æä¾›ä»æ•°æ®é‡‡é›†ã€ç­–ç•¥å¼€å‘ã€å›æµ‹åˆ†æåˆ°ç»“æœç®¡ç†çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆã€‚

### âœ¨ æ ¸å¿ƒäº®ç‚¹

- ğŸš€ **å¼€ç®±å³ç”¨**: å®Œæ•´çš„é‡åŒ–åˆ†æç³»ç»Ÿï¼Œæ— éœ€ä»é›¶å¼€å§‹æ­å»º
- ğŸ“Š **å¤šå¸‚åœºæ”¯æŒ**: åŒæ—¶æ”¯æŒè‚¡ç¥¨(Tushare)å’ŒåŠ å¯†è´§å¸(Binance/OKX/Bybit)
- ğŸ”¬ **å›æµ‹å¼•æ“**: äº‹ä»¶é©±åŠ¨çš„å›æµ‹ç³»ç»Ÿï¼Œæ”¯æŒT+0å’ŒT+1ä¸¤ç§æ¨¡å¼
- ğŸ¯ **ç­–ç•¥æ¨¡æ¿**: å†…ç½®13ç§ç­–ç•¥æ¨¡æ¿ï¼Œå¿«é€Ÿä¸Šæ‰‹é‡åŒ–åˆ†æ
- ğŸ” **å®‰å…¨å¯é **: åŸºäºJWTçš„è®¤è¯å’ŒRBACæƒé™æ§åˆ¶ï¼Œä¿éšœç³»ç»Ÿå®‰å…¨
- âš¡ **é«˜æ€§èƒ½**: åŸºäºFastAPIæ„å»ºï¼Œæ”¯æŒå¼‚æ­¥å¤„ç†å’Œåˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—
- ğŸ¨ **æ¶æ„ä¼˜åŒ–**: Repositoryæ¨¡å¼+ç»„ä»¶å¤ç”¨ï¼Œä»£ç é‡å‡å°‘50%+
- ğŸ“ˆ **æ€§èƒ½ç›‘æ§**: è‡ªåŠ¨æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–å»ºè®®ï¼Œå®æ—¶è¿½è¸ªAPIæ€§èƒ½

## åŠŸèƒ½ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½

#### è‚¡ç¥¨æ¨¡å—
- **ğŸ“Š æ•°æ®ç®¡ç†**: æ”¯æŒTushareæ•°æ®æº,è‡ªåŠ¨é‡‡é›†ã€æ¸…æ´—å’Œå­˜å‚¨è‚¡ç¥¨æ•°æ®
  - æ”¯æŒåˆ†è¡¨å­˜å‚¨,æé«˜æŸ¥è¯¢æ€§èƒ½
  - è‡ªåŠ¨æ±‡æ€»åˆ†è¡¨åŒæ­¥æ—¥å¿—,ä¾¿äºç›‘æ§å’Œç®¡ç†
  - æ”¯æŒæ•°æ®è§†å›¾,ç»Ÿä¸€æŸ¥è¯¢æ¥å£
- **ğŸ”¬ å›æµ‹å¼•æ“**: äº‹ä»¶é©±åŠ¨çš„å›æµ‹ç³»ç»Ÿ,T+1äº¤æ˜“æœºåˆ¶,æ”¯æŒå¤šç§ç­–ç•¥ç±»å‹
- **ğŸ“ˆ ç­–ç•¥ç®¡ç†**: å®Œæ•´çš„ç­–ç•¥å¢åˆ æ”¹æŸ¥åŠŸèƒ½,æ”¯æŒç­–ç•¥æ¨¡æ¿åº“
- **ğŸ“‰ ç»©æ•ˆåˆ†æ**: å…¨é¢çš„å›æµ‹ç»©æ•ˆæŒ‡æ ‡,åŒ…æ‹¬å¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤ç­‰
- **ğŸ‘¥ ç”¨æˆ·ç³»ç»Ÿ**: åŸºäºJWTçš„è®¤è¯å’ŒRBACæƒé™æ§åˆ¶
- **ğŸ” APIå¯†é’¥**: çµæ´»çš„APIå¯†é’¥ç®¡ç†æœºåˆ¶
- **ğŸ”” é€šçŸ¥ç³»ç»Ÿ**: å®Œæ•´çš„ç”¨æˆ·é€šçŸ¥åŠŸèƒ½,æ”¯æŒç³»ç»Ÿé€šçŸ¥ã€ç­–ç•¥é€šçŸ¥ç­‰
- **â° å®šæ—¶ä»»åŠ¡**: å¼ºå¤§çš„ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ,æ”¯æŒCronè¡¨è¾¾å¼å’Œé—´éš”è°ƒåº¦
- **ğŸ“‹ æ•°æ®æ—¥å¿—**: å®Œæ•´çš„æ•°æ®æ“ä½œæ—¥å¿—è®°å½•,æ”¯æŒåˆ†è¡¨æ±‡æ€»
- **â­ æˆ‘çš„è‡ªé€‰**: ç”¨æˆ·è‚¡ç¥¨è‡ªé€‰ç®¡ç†åŠŸèƒ½,æ”¯æŒæ·»åŠ ã€æŸ¥è¯¢ã€æ›´æ–°ã€åˆ é™¤è‡ªé€‰è‚¡ç¥¨,è®°å½•å…³æ³¨ç†ç”±
- **ğŸ’¼ æˆ‘çš„æŒä»“**: ç”¨æˆ·è‚¡ç¥¨æŒä»“ç®¡ç†åŠŸèƒ½,æ”¯æŒè®°å½•æŒä»“æ•°é‡ã€æˆæœ¬ä»·ã€ä¹°å…¥æ—¥æœŸç­‰ä¿¡æ¯,è‡ªåŠ¨è®¡ç®—å¸‚å€¼å’Œç›ˆäº

#### åŠ å¯†è´§å¸æ¨¡å—
- **ğŸŒ å¤šäº¤æ˜“æ‰€æ”¯æŒ**: æ”¯æŒBinanceã€OKXã€Bybitä¸‰å¤§ä¸»æµäº¤æ˜“æ‰€
- **ğŸ“Š å®æ—¶è¡Œæƒ…**: å®æ—¶è·å–åŠ å¯†è´§å¸ä»·æ ¼ã€äº¤æ˜“é‡ã€æ¶¨è·Œå¹…ç­‰ä¿¡æ¯
- **ğŸ“ˆ Kçº¿æ•°æ®**: æ”¯æŒå¤šç§å‘¨æœŸçš„Kçº¿æ•°æ®(1m/5m/15m/30m/1h/4h/1d)
- **ğŸ”¬ åŠ å¯†å›æµ‹**: T+0å³æ—¶æˆäº¤,24/7äº¤æ˜“,å¯å¤šå¯ç©º,çµæ´»æ æ†
- **ğŸ’° æˆæœ¬è®¡ç®—**: Maker/Takerè´¹ç‡è®¡ç®—,ç²¾ç¡®æ¨¡æ‹Ÿäº¤æ˜“æˆæœ¬
- **ğŸ¤– ç­–ç•¥åº“**: å†…ç½®5ç§åŠ å¯†è´§å¸ç­–ç•¥(å‡çº¿/çªç ´/ç½‘æ ¼/RSI/è¶‹åŠ¿)
- **ğŸ”„ æ•°æ®åŒæ­¥**: è‡ªåŠ¨åŒæ­¥äº¤æ˜“å¯¹åˆ—è¡¨å’ŒKçº¿æ•°æ®,æ”¯æŒå¢é‡åŒæ­¥
- **ğŸ“± å‰ç«¯é¡µé¢**: å®æ—¶è¡Œæƒ…ã€Kçº¿å›¾è¡¨ã€æ•°æ®åŒæ­¥ã€ç­–ç•¥å›æµ‹å››ä¸ªé¡µé¢

### ğŸ¯ ç­–ç•¥æ¨¡æ¿

ç³»ç»Ÿå†…ç½®13ç§ç­–ç•¥æ¨¡æ¿,æ¶µç›–æŠ€æœ¯åˆ†æã€åŸºæœ¬é¢åˆ†æå’Œé‡åŒ–ç­–ç•¥:

#### è‚¡ç¥¨ç­–ç•¥(8ç§)
- **æŠ€æœ¯åˆ†æç±»**: ç®€å•å‡çº¿ã€åŒå‡çº¿ã€å¸ƒæ—å¸¦ã€RSI
- **åŸºæœ¬é¢ç±»**: PE/PBä»·å€¼ç­–ç•¥
- **é‡åŒ–ç­–ç•¥ç±»**: åŠ¨é‡ç­–ç•¥ã€å‡å€¼å›å½’ã€ç½‘æ ¼äº¤æ˜“

#### åŠ å¯†è´§å¸ç­–ç•¥(5ç§)
- **æŠ€æœ¯åˆ†æç±»**: å‡çº¿ç­–ç•¥ã€çªç ´ç­–ç•¥ã€RSIç­–ç•¥
- **é‡åŒ–ç­–ç•¥ç±»**: ç½‘æ ¼äº¤æ˜“ç­–ç•¥ã€è¶‹åŠ¿è·Ÿè¸ªç­–ç•¥

### ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯æ¡†æ¶**: FastAPI - ç°ä»£ã€å¿«é€Ÿçš„Python Webæ¡†æ¶
- **æ•°æ®åº“**: MySQL - å¯é çš„å…³ç³»å‹æ•°æ®åº“
- **ORM**: SQLAlchemy - Python SQLå·¥å…·åŒ…å’ŒORM
- **ç¼“å­˜**: Redis - é«˜æ€§èƒ½å†…å­˜æ•°æ®åº“
- **å¼‚æ­¥ä»»åŠ¡**: Celery - åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—
- **å®šæ—¶ä»»åŠ¡**: APScheduler - Pythonä»»åŠ¡è°ƒåº¦åº“
- **æ•°æ®æº**: Tushare - ä¸“ä¸šçš„é‡‘èæ•°æ®æœåŠ¡
- **è®¤è¯**: JWT - æ— çŠ¶æ€çš„è®¤è¯æœºåˆ¶

## é¡¹ç›®ç»“æ„

```
zquant/
â”œâ”€â”€ zquant/              # ä¸»åŒ…
â”‚   â”œâ”€â”€ api/            # APIè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ decorators.py  # APIè£…é¥°å™¨ï¼ˆç»Ÿä¸€é”™è¯¯å¤„ç†ï¼‰
â”‚   â”‚   â””â”€â”€ v1/         # APIç‰ˆæœ¬1
â”‚   â”œâ”€â”€ models/         # æ•°æ®åº“æ¨¡å‹
â”‚   â”œâ”€â”€ schemas/        # Pydanticæ¨¡å‹
â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ core/           # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ data/           # æ•°æ®æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ storage.py      # æ•°æ®å­˜å‚¨æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ storage_base.py # æ•°æ®å­˜å‚¨åŸºç±»ï¼ˆå…¬å…±é€»è¾‘ï¼‰
â”‚   â”‚   â””â”€â”€ etl/        # ETLæµç¨‹
â”‚   â”œâ”€â”€ scheduler/      # è°ƒåº¦å™¨
â”‚   â”‚   â””â”€â”€ job/        # è°ƒåº¦ä»»åŠ¡
â”‚   â”‚       â”œâ”€â”€ base.py     # è°ƒåº¦è„šæœ¬åŸºç±»
â”‚   â”‚       â””â”€â”€ sync_*.py   # æ•°æ®åŒæ­¥è„šæœ¬
â”‚   â”œâ”€â”€ repositories/   # Repositoryå±‚ï¼ˆç»Ÿä¸€æ•°æ®è®¿é—®ï¼‰
â”‚   â”‚   â”œâ”€â”€ trading_date_repository.py
â”‚   â”‚   â”œâ”€â”€ stock_repository.py
â”‚   â”‚   â”œâ”€â”€ price_data_repository.py
â”‚   â”‚   â””â”€â”€ factor_repository.py
â”‚   â”œâ”€â”€ services/       # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â””â”€â”€ sync_strategies/  # æ•°æ®åŒæ­¥ç­–ç•¥ï¼ˆStrategyæ¨¡å¼ï¼‰
â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ code_converter.py  # ä»£ç è½¬æ¢å·¥å…·
â”‚   â”‚   â”œâ”€â”€ date_helper.py     # æ—¥æœŸå¤„ç†å·¥å…·
â”‚   â”‚   â”œâ”€â”€ query_builder.py   # æŸ¥è¯¢æ„å»ºå™¨
â”‚   â”‚   â””â”€â”€ cache_decorator.py # ç¼“å­˜è£…é¥°å™¨
â”‚   â”œâ”€â”€ constants/      # å¸¸é‡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ data_constants.py
â”‚   â”‚   â”œâ”€â”€ factor_constants.py
â”‚   â”‚   â””â”€â”€ api_constants.py
â”‚   â”œâ”€â”€ api/            # APIè·¯ç”±
â”‚   â”‚   â””â”€â”€ helpers/    # APIè¾…åŠ©ç±»
â”‚   â””â”€â”€ backtest/       # å›æµ‹å¼•æ“
â”œâ”€â”€ web/                # å‰ç«¯
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ hooks/          # React Hooks
â”‚       â”‚   â”œâ”€â”€ useDataQuery.ts      # æ•°æ®æŸ¥è¯¢Hook
â”‚       â”‚   â”œâ”€â”€ useDataValidation.ts # æ•°æ®æ ¡éªŒHook
â”‚       â”‚   â””â”€â”€ useDataSync.ts       # æ•°æ®åŒæ­¥Hook
â”‚       â”œâ”€â”€ components/     # ç»„ä»¶
â”‚       â”‚   â”œâ”€â”€ DataTable/      # æ•°æ®è¡¨æ ¼ç»„ä»¶
â”‚       â”‚   â””â”€â”€ DataTablePage/  # é€šç”¨æ•°æ®è¡¨æ ¼é¡µé¢ç»„ä»¶
â”‚       â””â”€â”€ pages/         # é¡µé¢
â”œâ”€â”€ docs/               # æ–‡æ¡£
â”‚   â”œâ”€â”€ refactoring_summary.md      # å†å²é‡æ„æ€»ç»“
â”‚   â””â”€â”€ refactoring_2025_summary.md # 2025é‡æ„æ€»ç»“
â””â”€â”€ zquant/
    â”œâ”€â”€ alembic/        # æ•°æ®åº“è¿ç§»
    â”œâ”€â”€ scripts/        # è„šæœ¬
    â”œâ”€â”€ strategy/
    â”‚   â””â”€â”€ examples/   # ç¤ºä¾‹ç­–ç•¥
    â””â”€â”€ tests/          # æµ‹è¯•
```

## æ¶æ„è®¾è®¡

### ä»£ç å¤ç”¨æ¶æ„

é¡¹ç›®é‡‡ç”¨åˆ†å±‚æ¶æ„ï¼Œé€šè¿‡åŸºç±»å’Œå·¥å…·å‡½æ•°å®ç°ä»£ç å¤ç”¨ï¼š

1. **å·¥å…·å‡½æ•°å±‚** (`zquant/utils/`): æä¾›é€šç”¨çš„å·¥å…·å‡½æ•°
2. **åŸºç±»å±‚** (`zquant/*/base.py`): æä¾›å…¬å…±é€»è¾‘çš„åŸºç±»
3. **ä¸šåŠ¡å±‚**: å®ç°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘

### ä¸»è¦é‡æ„æˆæœ

- âœ… æ•°æ®å­˜å‚¨å±‚ï¼šä»£ç é‡å¤åº¦é™ä½ > 50%
- âœ… è°ƒåº¦è„šæœ¬ï¼šç»Ÿä¸€å‚æ•°è§£æå’Œé”™è¯¯å¤„ç†
- âœ… APIå±‚ï¼šç»Ÿä¸€é”™è¯¯å¤„ç†å’Œå“åº”è½¬æ¢
- âœ… å‰ç«¯ï¼šç»Ÿä¸€æ•°æ®æŸ¥è¯¢å’Œè¡¨æ ¼å±•ç¤ºé€»è¾‘

è¯¦ç»†é‡æ„è¯´æ˜è¯·å‚è€ƒï¼š
- [2025é‡æ„æ€»ç»“](docs/refactoring_2025_summary.md) - æœ€æ–°é‡æ„æˆæœï¼ˆRepositoryæ¨¡å¼ã€æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–ã€Strategyæ¨¡å¼ç­‰ï¼‰
- [å†å²é‡æ„æ€»ç»“](docs/refactoring_summary.md) - æ—©æœŸé‡æ„æˆæœ

### æœ€æ–°ä¼˜åŒ–æˆæœï¼ˆ2025é‡æ„ï¼‰

#### æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- âœ… **Repositoryæ¨¡å¼**: ç»Ÿä¸€æ•°æ®è®¿é—®æ¥å£ï¼Œé›†ä¸­ç¼“å­˜ç®¡ç†ï¼Œå‡å°‘é‡å¤æŸ¥è¯¢
- âœ… **æ‰¹é‡æŸ¥è¯¢ä¼˜åŒ–**: å›æµ‹å¼•æ“ä»N+1æŸ¥è¯¢ä¼˜åŒ–ä¸ºæ‰¹é‡æŸ¥è¯¢ï¼ŒæŸ¥è¯¢æ¬¡æ•°å‡å°‘90%+
- âœ… **å·¥å…·ç±»åˆ›å»º**: CodeConverterã€DateHelperã€QueryBuilderç­‰å·¥å…·ç±»ï¼Œæé«˜ä»£ç å¤ç”¨æ€§
- âœ… **ç¼“å­˜è£…é¥°å™¨**: @cache_resultå’Œ@retry_on_failureè£…é¥°å™¨ï¼Œç®€åŒ–ç¼“å­˜å’Œé‡è¯•é€»è¾‘

#### è®¾è®¡æ¨¡å¼åº”ç”¨
- âœ… **Strategyæ¨¡å¼**: æ•°æ®åŒæ­¥ç­–ç•¥ç»Ÿä¸€ï¼Œæ˜“äºæ‰©å±•æ–°çš„åŒæ­¥ç­–ç•¥
- âœ… **Factoryæ¨¡å¼**: ç­–ç•¥å·¥å‚ï¼Œæ ¹æ®task_actionåˆ›å»ºå¯¹åº”ç­–ç•¥
- âœ… **Repositoryæ¨¡å¼**: ç»Ÿä¸€æ•°æ®è®¿é—®å±‚ï¼Œæ”¯æŒæ‰¹é‡æ“ä½œå’Œç¼“å­˜

#### å‰ç«¯ä¼˜åŒ–
- âœ… **Hookç»Ÿä¸€**: useDataValidationå’ŒuseDataSync Hookï¼Œç»Ÿä¸€æ•°æ®æ ¡éªŒå’ŒåŒæ­¥é€»è¾‘
- âœ… **ç»„ä»¶æŠ½è±¡**: DataTablePageé€šç”¨ç»„ä»¶ï¼Œé€šè¿‡é…ç½®é©±åŠ¨ï¼Œå‡å°‘é‡å¤ä»£ç 

#### ä»£ç è´¨é‡
- âœ… **ä»£ç é‡å¤åº¦**: é™ä½50%+ï¼Œé€šè¿‡Repositoryå’Œå·¥å…·ç±»æ˜¾è‘—æå‡ä»£ç å¤ç”¨æ€§
- âœ… **å¸¸é‡ç®¡ç†**: ç»Ÿä¸€ç®¡ç†æ•°æ®ã€å› å­ã€APIç›¸å…³å¸¸é‡
- âœ… **ä»£ç æ¸…ç†**: åˆ é™¤åºŸå¼ƒä»£ç ï¼Œæ¸…ç†é‡å¤å¯¼å…¥

è¯¦ç»†é‡æ„è¯´æ˜è¯·å‚è€ƒ [é‡æ„æ€»ç»“æ–‡æ¡£](docs/refactoring_2025_summary.md)

### å†å²ä¼˜åŒ–æˆæœ

- âœ… **ç»Ÿä¸€APIå“åº”æ ¼å¼**: åˆ›å»ºäº†ç»Ÿä¸€çš„å“åº”æ¨¡å‹å’Œè£…é¥°å™¨
- âœ… **ç»Ÿä¸€è¾“å…¥éªŒè¯**: å®ç°äº†é€šç”¨éªŒè¯å™¨ï¼Œå‡å°‘é‡å¤ä»£ç 
- âœ… **ä¼˜åŒ–ä¾èµ–æ³¨å…¥**: ä¼˜åŒ–äº†æ•°æ®åº“è¿æ¥æ± å’Œä¼šè¯ç®¡ç†
- âœ… **ç»Ÿä¸€æ—¥å¿—è®°å½•**: æ·»åŠ äº†è¯·æ±‚IDè¿½è¸ªå’Œç»“æ„åŒ–æ—¥å¿—
- âœ… **å®‰å…¨å¢å¼º**: å®ç°äº†XSSé˜²æŠ¤ã€é€Ÿç‡é™åˆ¶ã€ç™»å½•ä¿æŠ¤ã€å®¡è®¡æ—¥å¿—

è¯¦ç»†ä¼˜åŒ–è¯´æ˜è¯·å‚è€ƒ [ä¼˜åŒ–æ€»ç»“æ–‡æ¡£](docs/optimization_summary.md)

## å¿«é€Ÿå¼€å§‹

### ğŸ³ Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

ä½¿ç”¨ Docker Compose ä¸€é”®éƒ¨ç½²ï¼ŒåŒ…å«åº”ç”¨ã€MySQLã€Redis ç­‰æœåŠ¡ï¼š

```bash
# 1. é…ç½®ç¯å¢ƒå˜é‡
cp docker/.env.example docker/.env
# ç¼–è¾‘ docker/.envï¼Œä¿®æ”¹ SECRET_KEYã€DB_PASSWORDã€TUSHARE_TOKEN ç­‰é…ç½®

# 2. å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# 3. åˆå§‹åŒ–æ•°æ®åº“ï¼ˆé¦–æ¬¡éƒ¨ç½²ï¼‰
docker-compose exec zquant-app python3 -m zquant.scripts.init_db
docker-compose exec zquant-app python3 -m zquant.scripts.init_scheduler
docker-compose exec zquant-app python3 -m zquant.scripts.init_view
docker-compose exec zquant-app python3 -m zquant.scripts.init_strategies

# 4. è®¿é—®åº”ç”¨
# å‰ç«¯: http://localhost
# API æ–‡æ¡£: http://localhost/docs
```

**Docker éƒ¨ç½²ç‰¹æ€§**ï¼š
- âœ… å‰åç«¯ä»£ç è‡ªåŠ¨æ··æ·†æ‰“åŒ…
- âœ… ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼ˆåº”ç”¨ã€MySQLã€Redisï¼‰
- âœ… ç”Ÿäº§ç¯å¢ƒå°±ç»ª
- âœ… å¥åº·æ£€æŸ¥å’Œè‡ªåŠ¨é‡å¯
- âœ… æ•°æ®æŒä¹…åŒ–

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [Docker éƒ¨ç½²æ–‡æ¡£](docs/docker_deployment.md)

---

## åŠ å¯†è´§å¸æ¨¡å—

ZQuantç°å·²æ”¯æŒå®Œæ•´çš„åŠ å¯†è´§å¸é‡åŒ–åŠŸèƒ½,åŒ…å«å®æ—¶è¡Œæƒ…ã€Kçº¿å›¾è¡¨ã€ç­–ç•¥å›æµ‹ç­‰ã€‚

### ğŸ“‹ åŠŸèƒ½æ¦‚è§ˆ

- **ğŸŒ å¤šäº¤æ˜“æ‰€**: æ”¯æŒBinanceã€OKXã€Bybitä¸‰å¤§ä¸»æµäº¤æ˜“æ‰€
- **ğŸ“Š å®æ—¶è¡Œæƒ…**: å®æ—¶è·å–åŠ å¯†è´§å¸ä»·æ ¼ã€äº¤æ˜“é‡ã€æ¶¨è·Œå¹…ç­‰ä¿¡æ¯
- **ğŸ“ˆ Kçº¿å›¾è¡¨**: æ”¯æŒå¤šç§å‘¨æœŸçš„Kçº¿æ•°æ®(1m/5m/15m/30m/1h/4h/1d)
- **ğŸ”¬ å›æµ‹å¼•æ“**: T+0å³æ—¶æˆäº¤,24/7äº¤æ˜“,å¯å¤šå¯ç©º,çµæ´»æ æ†
- **ğŸ¤– ç­–ç•¥åº“**: å†…ç½®5ç§åŠ å¯†è´§å¸ç­–ç•¥(å‡çº¿/çªç ´/ç½‘æ ¼/RSI/è¶‹åŠ¿)
- **ğŸ”„ æ•°æ®åŒæ­¥**: è‡ªåŠ¨åŒæ­¥äº¤æ˜“å¯¹åˆ—è¡¨å’ŒKçº¿æ•°æ®,æ”¯æŒå¢é‡åŒæ­¥
- **ğŸ“± å‰ç«¯é¡µé¢**: å®æ—¶è¡Œæƒ…ã€Kçº¿å›¾è¡¨ã€æ•°æ®åŒæ­¥ã€ç­–ç•¥å›æµ‹å››ä¸ªé¡µé¢
- **ğŸ¨ æ¶æ„ä¼˜åŒ–**: Repositoryæ¨¡å¼+ç»„ä»¶å¤ç”¨,æŸ¥è¯¢æ€§èƒ½æå‡90%+

### ğŸš€ å¿«é€Ÿå¯åŠ¨

```bash
# 1. å®‰è£…åŠ å¯†è´§å¸ä¾èµ–
pip install -r requirements_crypto.txt

# 2. å¿«é€Ÿå¯åŠ¨(è‡ªåŠ¨åˆå§‹åŒ–æ•°æ®åº“å¹¶åŒæ­¥åŸºç¡€æ•°æ®)
python zquant/scripts/quick_start_crypto.py

# 3. é…ç½®APIå¯†é’¥(å¯é€‰)
# åœ¨.envæ–‡ä»¶ä¸­æ·»åŠ :
# BINANCE_API_KEY=your-api-key
# BINANCE_API_SECRET=your-api-secret

# 4. åˆå§‹åŒ–è°ƒåº¦ä»»åŠ¡
python zquant/scripts/init_crypto_scheduler.py

# 5. å¯åŠ¨æœåŠ¡
python -m zquant.main  # åç«¯
cd web && npm run dev # å‰ç«¯

# 6. è®¿é—®åŠ å¯†è´§å¸é¡µé¢
# http://localhost:8000/crypto/market  - è¡Œæƒ…é¡µé¢
# http://localhost:8000/crypto/chart   - Kçº¿å›¾è¡¨
# http://localhost:8000/crypto/sync    - æ•°æ®åŒæ­¥
# http://localhost:8000/crypto/backtest # ç­–ç•¥å›æµ‹
```

### ğŸ“Š 0.4.0æ¶æ„ä¼˜åŒ–

| ä¼˜åŒ–ç‚¹ | æå‡ | è¯´æ˜ |
|--------|------|------|
| Repositoryæ¨¡å¼ | 90%+ | æ‰¹é‡æŸ¥è¯¢æ›¿ä»£N+1æŸ¥è¯¢ |
| Scheduler Executor | 60% | è°ƒåº¦ä»»åŠ¡ä»£ç é‡å‡å°‘ |
| å‰ç«¯ç»„ä»¶æŠ½è±¡ | 40%+ | é¡µé¢ä»£ç é‡å‡å°‘ |
| ç»Ÿä¸€Hook | 50%+ | ä»£ç é‡å¤åº¦é™ä½ |
| æ€§èƒ½ç›‘æ§ | 100% | å®æ—¶è¿½è¸ªAPIæ€§èƒ½ |
| è£…é¥°å™¨å¢å¼º | 100% | è‡ªåŠ¨é‡è¯•ã€ç¼“å­˜ã€æ€§èƒ½ç›‘æ§ |

è¯¦ç»†ä¼˜åŒ–è¯´æ˜è¯·å‚è€ƒ [CRYPTO_V040_ENHANCEMENTS.md](CRYPTO_V040_ENHANCEMENTS.md)

### ğŸ“š è¯¦ç»†æ–‡æ¡£

- [åŠ å¯†è´§å¸å¿«é€Ÿå¼€å§‹æŒ‡å—](docs/CRYPTO_QUICKSTART.md) - 5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹
- [0.4.0æ¶æ„ä¼˜åŒ–](CRYPTO_V040_ENHANCEMENTS.md) - æ¶æ„ä¼˜åŒ–è¯¦æƒ…
- [æœ€ç»ˆæ€»ç»“æ–‡æ¡£](CRYPTO_FINAL_SUMMARY.md) - å®Œæ•´åŠŸèƒ½è¯´æ˜
- [ä½¿ç”¨æ–‡æ¡£](zquant/crypto/README.md) - å¼€å‘è€…æ–‡æ¡£
- [APIæ–‡æ¡£](http://localhost:8000/docs) - åœ¨çº¿APIæ–‡æ¡£

### ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

```python
# è·å–å®æ—¶ä»·æ ¼
from zquant.crypto.exchange_factory import ExchangeFactory
binance = ExchangeFactory.create_exchange("binance")
ticker = await binance.get_ticker("BTCUSDT")
print(f"BTCä»·æ ¼: ${ticker['price']}")

# è¿è¡Œå›æµ‹
from zquant.backtest.crypto_engine import CryptoBacktestEngine
from zquant.strategies.crypto_strategies import MovingAverageCryptoStrategy

strategy = MovingAverageCryptoStrategy(
    symbol="BTCUSDT",
    interval="1d",
    short_period=7,
    long_period=25,
)

engine = CryptoBacktestEngine()
result = engine.run(
    strategy=strategy,
    start_date="2024-01-01",
    end_date="2024-12-31",
    initial_capital=100000,
)
```

### ğŸ“Š é¡¹ç›®ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°é‡ |
|------|------|
| æ–°å¢æ–‡ä»¶ | 43ä¸ª |
| ä»£ç è¡Œæ•° | ~7000è¡Œ |
| APIç«¯ç‚¹ | 7ä¸ª |
| è°ƒåº¦ä»»åŠ¡ | 4ä¸ª |
| å‰ç«¯é¡µé¢ | 7ä¸ª |
| å†…ç½®ç­–ç•¥ | 13ç§(8è‚¡ç¥¨+5åŠ å¯†è´§å¸) |
| æ”¯æŒäº¤æ˜“æ‰€ | 3ä¸ª |
| Repositoryå±‚ | 2ä¸ª |
| è°ƒåº¦æ‰§è¡Œå™¨ | 1ä¸ª |
| å·¥å…·è£…é¥°å™¨ | 4ä¸ª |

è¯¦ç»†æ”¹é€ æ–‡æ¡£è¯·æŸ¥çœ‹:
- [P0æ ¸å¿ƒåŠŸèƒ½æ€»ç»“](CRYPTO_MIGRATION_SUMMARY.md)
- [P1é‡è¦åŠŸèƒ½æ€»ç»“](CRYPTO_P1_COMPLETED.md)
- [0.4.0æ¶æ„ä¼˜åŒ–](CRYPTO_V040_ENHANCEMENTS.md)
- [æœ€ç»ˆæ€»ç»“](CRYPTO_FINAL_SUMMARY.md)
- [é¡¹ç›®æ”¹è¿›æ€»ç»“](PROJECT_IMPROVEMENTS.md)

---

### ä¼ ç»Ÿéƒ¨ç½²æ–¹å¼

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶ä¿®æ”¹é…ç½®ï¼š

```bash
cp .env.example .env
```

**å…³é”®é…ç½®é¡¹è¯´æ˜**ï¼š

| é…ç½®é¡¹ | è¯´æ˜ | å¿…å¡« |
|--------|------|------|
| `DATABASE_URL` | MySQLæ•°æ®åº“è¿æ¥åœ°å€ | âœ… |
| `REDIS_URL` | Redisè¿æ¥åœ°å€ï¼ˆç”¨äºç¼“å­˜å’Œä»»åŠ¡é˜Ÿåˆ—ï¼‰ | âœ… |
| `TUSHARE_TOKEN` | Tushare API Tokenï¼ˆè·å–è‚¡ç¥¨æ•°æ®ï¼‰ | âœ… |
| `SECRET_KEY` | JWTå¯†é’¥ï¼ˆç”¨äºç”ŸæˆTokenï¼‰ | âœ… |
| `ALGORITHM` | JWTç®—æ³•ï¼ˆé»˜è®¤HS256ï¼‰ | âŒ |

æ›´å¤šé…ç½®è¯´æ˜è¯·å‚è€ƒ `.env.example` æ–‡ä»¶ä¸­çš„æ³¨é‡Šã€‚

### 3. åˆå§‹åŒ–æ•°æ®åº“

**æ–¹å¼ä¸€ï¼šä½¿ç”¨åˆå§‹åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰**

```bash
# ä»é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
# 1. åˆå§‹åŒ–æ•°æ®åº“å’ŒåŸºç¡€è¡¨
python zquant/scripts/init_db.py

# 2. åˆå§‹åŒ–å®šæ—¶ä»»åŠ¡ç³»ç»Ÿ
python zquant/scripts/init_scheduler.py

# 3. åˆ›å»ºæ•°æ®è§†å›¾
python zquant/scripts/init_view.py

# 4. å¯¼å…¥ç­–ç•¥æ¨¡æ¿
python zquant/scripts/init_strategies.py
```

**æ–¹å¼äºŒï¼šä½¿ç”¨Alembicè¿ç§»**

```bash
# åˆ›å»ºæ•°æ®åº“
mysql -u root -p -e "CREATE DATABASE zquant CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# è¿è¡Œè¿ç§»
alembic upgrade head
```

**æ³¨æ„ï¼š** ä½¿ç”¨åˆå§‹åŒ–è„šæœ¬ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰ï¼Œå¹¶åˆ›å»ºæ‰€æœ‰å¿…è¦çš„è¡¨ã€è§’è‰²ã€æƒé™å’Œåˆå§‹æ•°æ®ã€‚è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [è„šæœ¬ä½¿ç”¨è¯´æ˜](zquant/scripts/README.md)ã€‚

### 4. å¯åŠ¨æœåŠ¡

```bash
uvicorn zquant.main:app --reload --host 0.0.0.0 --port 8000
```

**é‡è¦æç¤º**ï¼š
- `--host 0.0.0.0` è¡¨ç¤ºç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼Œå…è®¸ä»ä»»ä½•IPè®¿é—®
- è®¿é—®æ—¶ä½¿ç”¨ `http://localhost:8000` æˆ– `http://127.0.0.1:8000`
- **ä¸è¦**ä½¿ç”¨ `http://0.0.0.0:8000` è®¿é—®ï¼ˆè¿™æ˜¯æœåŠ¡å™¨ç»‘å®šåœ°å€ï¼Œä¸æ˜¯å®¢æˆ·ç«¯è®¿é—®åœ°å€ï¼‰
- ä»å…¶ä»–æœºå™¨è®¿é—®æ—¶ï¼Œä½¿ç”¨æœåŠ¡å™¨çš„å®é™…IPåœ°å€ï¼Œä¾‹å¦‚ï¼š`http://192.168.1.100:8000`

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [API_ACCESS.md](API_ACCESS.md)

### 5. è®¿é—®APIæ–‡æ¡£

- **Swagger UI**: http://localhost:8000/docs - äº¤äº’å¼APIæ–‡æ¡£ï¼Œå¯ä»¥ç›´æ¥æµ‹è¯•æ¥å£
- **ReDoc**: http://localhost:8000/redoc - ç¾è§‚çš„APIæ–‡æ¡£å±•ç¤º

### 6. éªŒè¯å®‰è£…

è®¿é—® http://localhost:8000/health æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Œåº”è¯¥è¿”å›ï¼š

```json
{
  "status": "healthy",
  "timestamp": "2025-01-XX XX:XX:XX"
}
```

### 7. å¯åŠ¨å‰ç«¯ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ä½¿ç”¨Webç•Œé¢ï¼š

```bash
cd web
npm install
npm start
```

å‰ç«¯é»˜è®¤è¿è¡Œåœ¨ http://localhost:8001

## åŠŸèƒ½æ¨¡å—

### 1. ç”¨æˆ·ç®¡ç†
- ç”¨æˆ·è®¤è¯ï¼ˆJWTï¼‰
- åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- APIå¯†é’¥ç®¡ç†

### 2. æ•°æ®æ¨¡å—
- æ•°æ®é‡‡é›†ï¼ˆTushareï¼‰
- æ•°æ®å­˜å‚¨å’Œæ¸…æ´—
- å¤æƒå¤„ç†
- æ•°æ®æœåŠ¡API

### 3. å›æµ‹å¼•æ“
- ç­–ç•¥æ¥å£ï¼ˆBaseStrategyåŸºç±»ï¼‰
- äº‹ä»¶é©±åŠ¨å›æµ‹ï¼ˆæŒ‰äº¤æ˜“æ—¥å†æ¨è¿›ï¼‰
- äº¤æ˜“æˆæœ¬æ¨¡æ‹Ÿï¼ˆä½£é‡‘ã€å°èŠ±ç¨ã€æ»‘ç‚¹ï¼‰
- ç»©æ•ˆåˆ†æï¼ˆå¤æ™®æ¯”ç‡ã€æœ€å¤§å›æ’¤ã€Alpha/Betaç­‰ï¼‰

### 4. ç­–ç•¥ç®¡ç†
- ç­–ç•¥å¢åˆ æ”¹æŸ¥
- ç­–ç•¥æ¨¡æ¿åº“
- ç­–ç•¥åˆ†ç±»å’Œæœç´¢
- æ”¯æŒä»ç­–ç•¥åº“é€‰æ‹©æˆ–ç›´æ¥æä¾›ä»£ç 

## ğŸ“š æ–‡æ¡£

### æ ¸å¿ƒæ–‡æ¡£

- ğŸ“– [Docker éƒ¨ç½²æŒ‡å—](docs/docker_deployment.md) - å®Œæ•´çš„ Docker å®¹å™¨åŒ–éƒ¨ç½²æ–¹æ¡ˆ
- ğŸ“– [APIè®¿é—®æŒ‡å—](API_ACCESS.md) - APIè®¿é—®é…ç½®è¯´æ˜å’Œå¸¸è§é—®é¢˜
- ğŸ“– [æ•°æ®åº“åˆå§‹åŒ–æŒ‡å—](docs/database_init.md) - æ•°æ®åº“åˆå§‹åŒ–æµç¨‹å’Œè¡¨åè§„èŒƒ
- ğŸ“– [ç­–ç•¥ç®¡ç†æ–‡æ¡£](docs/strategy_management.md) - ç­–ç•¥ç®¡ç†ç³»ç»Ÿå®Œæ•´ä½¿ç”¨æŒ‡å—
- ğŸ“– [è°ƒåº¦å™¨æŒ‡å—](docs/scheduler_guide.md) - å®šæ—¶ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿä½¿ç”¨æŒ‡å—
- ğŸ“– [é‡æ„æ€»ç»“](docs/refactoring_summary.md) - é¡¹ç›®æ¶æ„é‡æ„è¯´æ˜
- ğŸ“– [è„šæœ¬ä½¿ç”¨è¯´æ˜](zquant/scripts/README.md) - æ‰€æœ‰åˆå§‹åŒ–å’Œç®¡ç†è„šæœ¬çš„ä½¿ç”¨è¯´æ˜

### å¿«é€Ÿé“¾æ¥

- ğŸ”— [é¡¹ç›®æ–‡æ¡£ç½‘ç«™](https://github.com/yoyoung/zquant/blob/main/README.md) - å®Œæ•´çš„é¡¹ç›®æ–‡æ¡£å’ŒAPIå‚è€ƒ
- ğŸ”— [GitHub Issues](https://github.com/yoyoung/zquant/issues) - æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºåŠŸèƒ½è¯·æ±‚
- ğŸ”— [GitHub Discussions](https://github.com/yoyoung/zquant/discussions) - å‚ä¸è®¨è®ºå’Œäº¤æµ

## â“ å¸¸è§é—®é¢˜

### å®‰è£…å’Œéƒ¨ç½²

**Q: å¦‚ä½•é…ç½®æ•°æ®åº“è¿æ¥ï¼Ÿ**

A: åœ¨ `.env` æ–‡ä»¶ä¸­è®¾ç½® `DATABASE_URL`ï¼Œæ ¼å¼ä¸ºï¼š
```
DATABASE_URL=mysql+pymysql://ç”¨æˆ·å:å¯†ç @ä¸»æœº:ç«¯å£/æ•°æ®åº“å
```

**Q: å¦‚ä½•è·å–Tushare Tokenï¼Ÿ**

A: è®¿é—® [Tushareå®˜ç½‘](https://tushare.pro/) æ³¨å†Œè´¦å·å¹¶è·å–Tokenï¼Œç„¶ååœ¨ `.env` æ–‡ä»¶ä¸­é…ç½® `TUSHARE_TOKEN`ã€‚

**Q: æœåŠ¡å¯åŠ¨åæ— æ³•è®¿é—®ï¼Ÿ**

A: è¯·æ£€æŸ¥ï¼š
1. æ˜¯å¦ä½¿ç”¨äº†æ­£ç¡®çš„è®¿é—®åœ°å€ï¼ˆ`http://localhost:8000` è€Œä¸æ˜¯ `http://0.0.0.0:8000`ï¼‰
2. é˜²ç«å¢™æ˜¯å¦å…è®¸8000ç«¯å£
3. æœåŠ¡æ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [APIè®¿é—®æŒ‡å—](API_ACCESS.md)ã€‚

### ä½¿ç”¨é—®é¢˜

**Q: å¦‚ä½•åˆ›å»ºç¬¬ä¸€ä¸ªç­–ç•¥ï¼Ÿ**

A: å‚è€ƒ [ç­–ç•¥ç®¡ç†æ–‡æ¡£](docs/strategy_management.md)ï¼Œç³»ç»Ÿæä¾›äº†8ç§ç­–ç•¥æ¨¡æ¿ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨æˆ–åŸºäºæ¨¡æ¿è¿›è¡Œä¿®æ”¹ã€‚

**Q: å¦‚ä½•é…ç½®å®šæ—¶ä»»åŠ¡ï¼Ÿ**

A: å‚è€ƒ [è°ƒåº¦å™¨æŒ‡å—](docs/scheduler_guide.md)ï¼Œç³»ç»Ÿæ”¯æŒCronè¡¨è¾¾å¼å’Œé—´éš”è°ƒåº¦ä¸¤ç§æ–¹å¼ã€‚

**Q: å›æµ‹ç»“æœå¦‚ä½•è§£è¯»ï¼Ÿ**

A: ç³»ç»Ÿæä¾›äº†å…¨é¢çš„ç»©æ•ˆæŒ‡æ ‡ï¼ŒåŒ…æ‹¬ï¼š
- æ”¶ç›Šç‡ï¼ˆæ€»æ”¶ç›Šç‡ã€å¹´åŒ–æ”¶ç›Šç‡ï¼‰
- é£é™©æŒ‡æ ‡ï¼ˆæœ€å¤§å›æ’¤ã€æ³¢åŠ¨ç‡ï¼‰
- é£é™©è°ƒæ•´æ”¶ç›Šï¼ˆå¤æ™®æ¯”ç‡ã€Alphaã€Betaï¼‰

### å¼€å‘é—®é¢˜

**Q: å¦‚ä½•è´¡çŒ®ä»£ç ï¼Ÿ**

A: è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md)ï¼Œäº†è§£ä»£ç è§„èŒƒå’Œæäº¤æµç¨‹ã€‚

**Q: å¦‚ä½•è¿è¡Œæµ‹è¯•ï¼Ÿ**

A: ä½¿ç”¨ `pytest` å‘½ä»¤è¿è¡Œæµ‹è¯•ï¼Œç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡åå†æäº¤ä»£ç ã€‚

**Q: ä»£ç æ ¼å¼åŒ–å·¥å…·å¦‚ä½•ä½¿ç”¨ï¼Ÿ**

A: é¡¹ç›®ä½¿ç”¨ `ruff` è¿›è¡Œä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–ï¼Œè¯¦è§ [å¼€å‘](#å¼€å‘) éƒ¨åˆ†ã€‚

## âš–ï¸ æ³•å¾‹å£°æ˜

- [ç”¨æˆ·åè®®](/legal/user-agreement) - äº†è§£å¹³å°ä½¿ç”¨æ¡æ¬¾ã€ç”¨æˆ·æƒåˆ©å’Œä¹‰åŠ¡
- [å…è´£ç”³æ˜](/legal/disclaimer) - äº†è§£æŠ•èµ„é£é™©æç¤ºå’Œå…è´£æ¡æ¬¾

**é‡è¦æç¤º**ï¼šæœ¬å¹³å°å±•ç¤ºçš„è‚¡ç¥¨åˆ—è¡¨æ˜¯åŸºäºå…¬å¼€å¸‚åœºæ•°æ®å’Œåˆ†æå·¥å…·å¾—å‡ºçš„ç»“æœï¼Œä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆä»»ä½•æŠ•èµ„å»ºè®®ã€‚æŠ•èµ„æœ‰é£é™©ï¼Œå…¥å¸‚éœ€è°¨æ…ã€‚

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼ZQuant æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ‚¨çš„å‚ä¸å¯¹æˆ‘ä»¬éå¸¸é‡è¦ã€‚

### å¦‚ä½•è´¡çŒ®

1. **Fork é¡¹ç›®**ï¼šç‚¹å‡»å³ä¸Šè§’çš„ Fork æŒ‰é’®
2. **åˆ›å»ºåˆ†æ”¯**ï¼š`git checkout -b feature/your-feature-name`
3. **æäº¤æ›´æ”¹**ï¼š`git commit -m 'Add some feature'`
4. **æ¨é€åˆ†æ”¯**ï¼š`git push origin feature/your-feature-name`
5. **æäº¤PR**ï¼šåœ¨GitHubä¸Šåˆ›å»ºPull Request

### è´¡çŒ®æ–¹å¼

- ğŸ› **æŠ¥å‘ŠBug**ï¼š[æäº¤Issue](https://github.com/yoyoung/zquant/issues/new?template=bug_report.md)
- ğŸ’¡ **æå‡ºåŠŸèƒ½è¯·æ±‚**ï¼š[æäº¤Feature Request](https://github.com/yoyoung/zquant/issues/new?template=feature_request.md)
- ğŸ“ **æ”¹è¿›æ–‡æ¡£**ï¼šä¿®å¤æ–‡æ¡£é”™è¯¯æˆ–æ·»åŠ æ–°å†…å®¹
- ğŸ’» **æäº¤ä»£ç **ï¼šä¿®å¤Bugæˆ–å®ç°æ–°åŠŸèƒ½
- ğŸŒŸ **æ¨å¹¿é¡¹ç›®**ï¼šç»™é¡¹ç›®ä¸€ä¸ªStarï¼Œåˆ†äº«ç»™æ›´å¤šäºº

### è´¡çŒ®æŒ‡å—

è¯·æŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md) äº†è§£è¯¦ç»†çš„ä»£ç è§„èŒƒã€æäº¤æµç¨‹å’Œå¼€å‘æŒ‡å—ã€‚

## ğŸ’¬ ç¤¾åŒºå’Œæ”¯æŒ

æˆ‘ä»¬éå¸¸é‡è§†ç¤¾åŒºåé¦ˆå’Œæ”¯æŒï¼Œæ¬¢è¿é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬ï¼š

### è”ç³»æ–¹å¼

- ğŸ“§ **é‚®ç®±**: kevin@vip.qq.com
- ğŸ’¬ **å¾®ä¿¡**: zquant2025
- ğŸ› **é—®é¢˜åé¦ˆ**: [GitHub Issues](https://github.com/yoyoung/zquant/issues)
- ğŸ“š **æ–‡æ¡£ç½‘ç«™**: [https://github.com/yoyoung/zquant/blob/main/README.md](https://github.com/yoyoung/zquant/blob/main/README.md)
- ğŸ’¬ **è®¨è®ºäº¤æµ**: [GitHub Discussions](https://github.com/yoyoung/zquant/discussions)

### è·å–å¸®åŠ©

- é‡åˆ°é—®é¢˜ï¼ŸæŸ¥çœ‹ [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜) æˆ– [æäº¤Issue](https://github.com/yoyoung/zquant/issues)
- æœ‰å»ºè®®ï¼Ÿåœ¨ [Discussions](https://github.com/yoyoung/zquant/discussions) ä¸­åˆ†äº«æ‚¨çš„æƒ³æ³•
- æƒ³è´¡çŒ®ï¼ŸæŸ¥çœ‹ [è´¡çŒ®æŒ‡å—](CONTRIBUTING.md) äº†è§£å¦‚ä½•å‚ä¸

## å¼€å‘

### è¿è¡Œæµ‹è¯•

```bash
pytest
```

### ä»£ç æ ¼å¼åŒ–å’Œæ£€æŸ¥

é¡¹ç›®ä½¿ç”¨ `ruff`ã€`black` å’Œ `isort` è¿›è¡Œä»£ç æ ¼å¼åŒ–å’Œæ£€æŸ¥ã€‚

#### å®‰è£…å·¥å…·

```bash
pip install ruff black isort
```

æˆ–ä» requirements.txt å®‰è£…ï¼š

```bash
pip install -r requirements.txt
```

#### ä½¿ç”¨æ–¹å¼

**æ–¹å¼ä¸€ï¼šä½¿ç”¨ Ruffï¼ˆæ¨èï¼Œæœ€å¿«ï¼‰**

Ruff å¯ä»¥åŒæ—¶è¿›è¡Œä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–ï¼Œé€Ÿåº¦æå¿«ï¼š

```bash
# æ£€æŸ¥ä»£ç ï¼ˆä¸ä¿®æ”¹æ–‡ä»¶ï¼‰
ruff check zquant/

# è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„é—®é¢˜
ruff check --fix zquant/

# æ ¼å¼åŒ–ä»£ç ï¼ˆå…¼å®¹ Black é£æ ¼ï¼‰
ruff format zquant/

# åŒæ—¶æ£€æŸ¥å’Œæ ¼å¼åŒ–
ruff check --fix zquant/ && ruff format zquant/
```

**æ–¹å¼äºŒï¼šä½¿ç”¨ Black + isortï¼ˆä¼ ç»Ÿæ–¹å¼ï¼‰**

```bash
# æ ¼å¼åŒ–ä»£ç 
black zquant/

# æ’åºå¯¼å…¥
isort zquant/

# åŒæ—¶æ‰§è¡Œ
black zquant/ && isort zquant/
```

**æ–¹å¼ä¸‰ï¼šä½¿ç”¨ Ruff æ›¿ä»£ isortï¼ˆæ¨èï¼‰**

Ruff å†…ç½®äº† isort åŠŸèƒ½ï¼Œå¯ä»¥æ›¿ä»£ isortï¼š

```bash
# ä½¿ç”¨ Ruff è¿›è¡Œæ ¼å¼åŒ–ï¼ˆåŒ…å«å¯¼å…¥æ’åºï¼‰
ruff format zquant/

# ä½¿ç”¨ Ruff æ£€æŸ¥å¯¼å…¥é¡ºåº
ruff check --select I zquant/
```

#### é…ç½®æ–‡ä»¶

é¡¹ç›®ä½¿ç”¨ `pyproject.toml` ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å·¥å…·çš„é…ç½®ï¼š

- `[tool.ruff]` - Ruff é…ç½®ï¼ˆlinting å’Œæ ¼å¼åŒ–ï¼‰
- `[tool.black]` - Black é…ç½®
- `[tool.isort]` - isort é…ç½®

#### å¸¸ç”¨å‘½ä»¤

```bash
# æ£€æŸ¥æ•´ä¸ªé¡¹ç›®
ruff check .

# æ ¼å¼åŒ–æ•´ä¸ªé¡¹ç›®
ruff format .

# åªæ£€æŸ¥ç‰¹å®šæ–‡ä»¶
ruff check zquant/api/v1/config.py

# åªæ ¼å¼åŒ–ç‰¹å®šæ–‡ä»¶
ruff format zquant/api/v1/config.py

# æŸ¥çœ‹æ‰€æœ‰å¯ä¿®å¤çš„é—®é¢˜
ruff check --output-format=concise .

# è‡ªåŠ¨ä¿®å¤æ‰€æœ‰å¯ä¿®å¤çš„é—®é¢˜
ruff check --fix .
```

#### ä¸ IDE é›†æˆ

**VS Code:**

å®‰è£…æ‰©å±•ï¼š
- Ruff (astral-sh.ruff)
- Black Formatter (ms-python.black-formatter)

**PyCharm:**

1. Settings -> Tools -> External Tools
2. æ·»åŠ  Ruff å’Œ Black ä½œä¸ºå¤–éƒ¨å·¥å…·
3. é…ç½®å¿«æ·é”®

#### Pre-commit é›†æˆï¼ˆå¯é€‰ï¼‰

é¡¹ç›®åŒ…å« `.pre-commit-config.yaml` é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ Git æäº¤æ—¶è‡ªåŠ¨è¿è¡Œä»£ç æ£€æŸ¥ï¼š

```bash
# å®‰è£… pre-commit
pip install pre-commit

# å®‰è£… Git hooks
pre-commit install

# æ‰‹åŠ¨è¿è¡Œæ‰€æœ‰æ£€æŸ¥
pre-commit run --all-files
```

å®‰è£…åï¼Œæ¯æ¬¡ `git commit` æ—¶ä¼šè‡ªåŠ¨è¿è¡Œ ruff æ£€æŸ¥ã€‚å¦‚æœä¸æƒ³ä½¿ç”¨ï¼Œå¯ä»¥è¿è¡Œ `pre-commit uninstall` å¸è½½ã€‚

#### æ³¨æ„äº‹é¡¹

- Ruff å¯ä»¥æ›¿ä»£ isort å’Œ blackï¼ˆruff format å…¼å®¹ black é£æ ¼ï¼‰
- å¦‚æœåŒæ—¶ä½¿ç”¨å¤šä¸ªå·¥å…·ï¼Œå»ºè®®å…ˆè¿è¡Œ `ruff format`ï¼Œå†è¿è¡Œ `black`ï¼ˆå¦‚æœä½¿ç”¨ï¼‰
- é…ç½®æ–‡ä»¶ä¸­å·²è®¾ç½®è¡Œé•¿åº¦ä¸º 120 å­—ç¬¦
- æ‰€æœ‰å·¥å…·é…ç½®ä¿æŒä¸€è‡´ï¼Œé¿å…å†²çª
- Pre-commit æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸éœ€è¦å¯ä»¥å¸è½½ï¼š`pre-commit uninstall`

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [Apache License 2.0](LICENSE) è®¸å¯è¯ã€‚

```
Copyright 2025 ZQuant Authors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
```

## è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªStarï¼**

Made with â¤ï¸ by [ZQuant Team](https://github.com/zquant)

</div>

